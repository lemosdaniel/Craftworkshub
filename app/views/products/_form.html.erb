<%= form_with(model: product) do |form| %>
  <% if product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% product.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3">
    <%= form.label :title, class: 'form-label' %>
      <%= form.text_field :title, class: 'form-control' %>
    </div>

  <div class="mb-3">
    <%= form.label :description, class: 'form-label' %>
      <%= form.text_area :description, class: 'form-control' %>
    </div>

  <div class="mb-3">
    <%= form.label :price, class: 'form-label' %>
    <%= form.text_field :price, class: 'form-control' %>
  </div>

   <div class="mb-3">
    <%= form.label :category, class: 'form-label' %>
    <%= form.text_field :category, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= form.label :image, class: 'form-label' %>
    <%= form.file_field :image, class: 'form-control' %>
  </div>
  

  <div class="mb-3">
    <%= form.hidden_field :user_id, value: current_user.id %>
  </div>

  <div class="mb-3">
    <% if product.persisted? %>
      <div class="float-end">
        <%= link_to product_path(product), method: :delete, class: "text-danger btn btn-danger text-white", data: { confirm: 'Are you sure?' } do %>
          <i class="bi bi-trash"> Delete</i>
        <% end %>
      </div>
    <% end %>

    <button type="submit" class="btn btn-p">
      <i class="bi bi-check-circle-fill"></i> <%= product.persisted? ? "Update" : "Create"%>
    </button>


    <% if product.persisted? %>
      <%= link_to product_path(product), class: "btn btn-secondary text-white" do %>
        <i class="bi bi-x-circle-fill"> Cancel</i>
      <% end %>
    <% else %>
      <%= link_to products_path, class: "btn btn-secondary text-white" do %>
         <i class="bi bi-x-circle-fill"> Cancel</i>
      <% end %>
    <% end %>
  </div>
<% end %>
